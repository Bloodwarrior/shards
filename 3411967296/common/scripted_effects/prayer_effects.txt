check_for_heresy = {
	save_opinion_value_as = {
		name = opinion_of_petitioner
		target = scope:divinity
	}
	random = {
		chance = 25
		modifier = {
			add = 25
			has_trait = cynical
		}
		modifier = {
			add = -25
			has_trait = zealous
		}
		compare_modifier {
			value = ai_zeal
			multiplier = -0.5
		}
		compare_modifier = {
			value = scope:opinion_of_petitioner
			multiplier = -0.25
		}
		modifier = {
			factor = 0
			scope:divinity = {
				has_hook = scope:petitioner
			}
		}
		save_scope_as = heretic_ruler
		faith = {
			trigger_event = {
				id = divine_heresy.0001
				# days = { 7 14 }
			}
		}
		custom_tooltip = ruler_starts_heresy_tooltip
		
	}
}

gave_minor_boon = {
	if = {
		limit = { NOT = { scope:petitioner.faith = scope:divinity.faith } }
		scope:petitioner = {
			set_character_faith_with_conversion = scope:divinity.faith
		}
	}
	scope:petitioner = {
		add_opinion = {
			target = scope:divinity
			modifier = minor_boon
		}
	}
}

gave_medium_boon = {
	if = {
		limit = { NOT = { scope:petitioner.faith = scope:divinity.faith } }
		scope:petitioner = {
			set_character_faith_with_conversion = scope:divinity.faith
		}
		
	}
	scope:petitioner = {
		add_opinion = {
			target = scope:divinity
			modifier = medium_boon
		}
	}
	scope:divinity = {
		add_hook = {type = medium_boon target = scope:petitioner}
	}
}

gave_major_boon = {
	if = {
		limit = { NOT = { scope:petitioner.faith = scope:divinity.faith } }
		scope:petitioner = {
			set_character_faith_with_conversion = scope:divinity.faith
		}
		
	}
	scope:petitioner = {
		add_opinion = {
			target = scope:divinity
			modifier = major_boon
		}
	}
	scope:divinity = {
		add_hook = {type = major_boon target = scope:petitioner}
	}
}

choose_prayer_effect = {
	save_scope_as = petitioner
	random_list = {
		### War Boons ###
		1 = {
			modifier = {
				add = 10
				is_at_war = yes
			}
			modifier = {
				add = 10
				in_bad_war = yes
			}
			modifier = {
				add = 10
				has_trait = wrathful
			}
			modifier = {
				add = 5
				has_education_martial_trigger = yes
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_war_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0001
			}
		}
		1 = {
			modifier = {
				add = 10
				is_at_war = yes
			}
			modifier = {
				add = 10
				in_bad_war = yes
			}
			modifier = {
				add = 10
				is_in_army = yes
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_battle_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0006
			}
		}
		1 = {
			modifier = {
				add = 10
				is_at_war = yes
			}
			modifier = {
				add = 10
				in_bad_war = yes
			}
			modifier = {
				add = 10
				is_in_army = yes
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_speed_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0005
			}
		}
		1 = {
			modifier = {
				add = 25
				is_at_war = yes
			}
			modifier = {
				add = 45
				in_bad_war = yes
			}
			scope:divinity = {
				trigger_event = divine_prayer.3000
			}
		}
		1 = {
			modifier = {
				add = 10
				has_trait = weak
			}
			modifier = {
				add = 10
				is_in_army = yes
				prowess < 10
			}
			trigger = {
				NOT = { has_trait = strong }
			}
			scope:divinity = {
				trigger_event = divine_prayer.2003
			}
		}
		### Immortality ###
		2 = {
			modifier = {
				add = 50
				is_at_war = yes								
				has_trait = craven
			}
			modifier = {
				add = 10
				has_trait = ambitious
			}
			modifier = {
				add = 10
				age > 60
			}
			modifier = {
				add = 5
				has_trait = arrogant
			}
			trigger = {
				NOT = { any_immortal_trait = yes }
			}
			scope:divinity = {
				trigger_event = divine_prayer.1000
			}
		}
		### Health ###
		0 = {
			modifier = {
				add = 150
				has_health_problems = yes
			}
			modifier = {
				factor = 150
				has_health_problems = yes
				health < 3
			}
			scope:divinity = {
				trigger_event = divine_prayer.2005
			}
		}
		1 = {
			modifier = {
				add = 10
				has_trait = infertile
			}
			modifier = {
				add = 10
				fertility < 0.3
			}
			trigger = {
				NOT = { has_trait = fecund }
			}
			scope:divinity = {
				trigger_event = divine_prayer.2004
			}
		}
		### Tiered Traits ###
		1 = {
			modifier = {
				add = 10
				has_trait_rank = {
					trait = intellect_bad
					rank > 0
				}
			}
			modifier = {
				add = 10
				has_trait_rank = {
					trait = intellect_bad
					rank > 1
				}
			}
			modifier = {
				add = 10
				has_trait_rank = {
					trait = intellect_bad
					rank > 2
				}
			}
			modifier = {
				add = 10
				has_trait = ambitious
			}
			modifier = {
				add = 5
				ai_rationality > 25
			}
			trigger = {
				NOT = { has_trait = intellect_good_3}
			}
			scope:divinity = {
				trigger_event = divine_prayer.2000
			}
		}
		1 = {
			modifier = {
				add = 10
				has_trait_rank = {
					trait = beauty_bad
					rank > 0
				}
			}
			modifier = {
				add = 10
				has_trait_rank = {
					trait = beauty_bad
					rank > 1
				}
			}
			modifier = {
				add = 10
				has_trait_rank = {
					trait = beauty_bad
					rank > 2
				}
			}
			modifier = {
				add = 10
				has_trait = seducer
			}
			modifier = {
				add = 2
				has_diplomacy_education_trigger = yes
			}
			trigger = {
				NOT = { has_trait = beauty_good_3}
			}
			scope:divinity = {
				trigger_event = divine_prayer.2001
			}
		}
		1 = {
			modifier = {
				add = 10
				has_trait_rank = {
					trait = physique_bad
					rank > 0
				}
			}
			modifier = {
				add = 10
				has_trait_rank = {
					trait = physique_bad
					rank > 1
				}
			}
			modifier = {
				add = 10
				has_trait_rank = {
					trait = physique_bad
					rank > 2
				}
			}
			modifier = {
				add = 10
				has_trait = lifestyle_blademaster
			}
			modifier = {
				add = 5
				health < 3
			}

			trigger = {
				NOT = { has_trait = physique_good_3}
			}
			scope:divinity = {
				trigger_event = divine_prayer.2002
			}
		}
		### Other ###
		3 = {
			modifier = {
				add = 10
				has_trait = gregarious
			}
			modifier = {
				add = 10
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				add = 5
				any_scheme = {
					is_hostile = no
				}
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_love_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0004
			}
		}
		3 = {
			modifier = {
				add = 10
				has_trait = greedy
			}
			modifier = {
				add = 10
				has_education_stewardship_trigger = yes
			}
			modifier = {
				add = 20
				gold < 0
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_gold_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0002
			}
		}
		3 = {
			modifier = {
				add = 10
				has_trait = decietful
			}
			modifier = {
				add = 10
				has_education_intrigue_trigger = yes
			}
			modifier = {
				add = 5
				any_scheme = {
					is_hostile = yes
				}
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_deceit_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0003
			}
		}
		3 = {
			modifier = {
				add = 10
				has_trait = calm
			}
			modifier = {
				add = 10
				has_education_learning_trigger = yes
			}
			modifier = {
				add = 10
				stress > 75
			}
			modifier = {
				factor = 0.5
				has_character_modifier = blessing_of_mind_modifier
			}
			scope:divinity = {
				trigger_event = divine_prayer.0007
			}
		}
	}
}