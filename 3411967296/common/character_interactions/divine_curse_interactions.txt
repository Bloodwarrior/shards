curse_interaction = {
	category = interaction_category_religion
	icon = curse

	interface_priority = 80
	desc = curse_interaction_desc
	
	is_shown = {
		scope:actor = { is_a_divinity = yes }
		NOT = {scope:actor = scope:recipient }
	}

	is_valid_showing_failures_only = {
		scope:recipient = {
			OR = {
				NOT = {
					is_a_divinity = yes
				}
				has_trait = prophet_manifestation
			}
			
		}
	}

	send_options_exclusive = yes
	send_option = {
		is_valid = {
			scope:recipient =  {
				NOT = { has_trait = beauty_bad_3 }
			}
		}
		flag = beauty
		localization = beauty_option
	}

	send_option = {
		is_valid = {
			scope:recipient =  {
				NOT = { has_trait = intellect_bad_3 }
			}
		}
		flag = intellect
		localization = intellect_option
	}

	send_option = {
		is_valid = {
			scope:recipient =  {
				OR = {
					has_trait = physique_good_1
					has_trait = physique_good_2
					has_trait = physique_good_3
					NOT = { has_trait = strong }
				}
				NOT = { has_trait = physique_bad_3 }
			}
		}
		flag = physique
		localization = physique_option
	}

	send_option = {
		is_valid = {
			scope:recipient =  {
				NOT = { has_trait = physique_good_1 }
				NOT = { has_trait = physique_good_2 }
				NOT = { has_trait = physique_good_3 }
				NOT = { has_trait = weak }
			}
		}
		flag = strong
		localization = strong_option
	}

	send_option = {
		is_valid = {
			scope:recipient =  {
				NOT = { has_trait = infertile }
			}
		}
		flag = fecund
		localization = fecund_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_defeat
		localization = curse_of_defeat_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_loss
		localization = curse_of_loss_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_deceit
		localization = curse_of_deceit_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_hate
		localization = curse_of_hate_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_sand
		localization = curse_of_sand_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_battle
		localization = curse_of_battle_option
	}

	send_option = {
		is_valid = {
		}
		flag = curse_of_mind
		localization = curse_of_mind_option
	}
 

	on_accept = {
		scope:recipient = {
			add_opinion = {
				target = scope:actor
				modifier = cursed_me_opinion
			}
		}

		if = {
			limit = {
				scope:beauty = yes
			}
			scope:recipient = { 
				decrease_beauty_rank_investment = {AMOUNT = 1}	
			}
		}

		if = {
			limit = {
				scope:intellect = yes
			}
			scope:recipient = {
				decrease_intellect_rank_investment = {AMOUNT = 1}	
			}
		}

		if = {
			limit = {
				scope:physique = yes
			}
			scope:recipient = {
				decrease_physique_rank_investment = {AMOUNT = 1}	
			}
		}

		if = {
			limit = {
				scope:strong = yes
			}
			scope:recipient = {
				strength_curse_effect = yes
			}
		}

		if = {
			limit = {
				scope:fecund = yes
			}
			scope:recipient = {
				fecund_curse_effect = yes
			}
		}

		scope:recipient = {
			if = {
				limit = {
					scope:curse_of_defeat = yes
				}
				add_curse = { CURSE = defeat }
			}
	
			if = {
				limit = {
					scope:curse_of_loss = yes
				}
				add_curse = { CURSE = loss }
			}

			if = {
				limit = {
					scope:curse_of_deceit = yes
				}
				add_curse = { CURSE = deceit }
			}

			if = {
				limit = {
					scope:curse_of_hate = yes
				}
				add_curse = { CURSE = hate }
			}

			if = {
				limit = {
					scope:curse_of_sand = yes
				}
				add_curse = { CURSE = sand }
			}

			if = {
				limit = {
					scope:curse_of_battle = yes
				}
				add_curse = { CURSE = battle }
			}

			if = {
				limit = {
					scope:curse_of_mind = yes
				}
				add_curse = { CURSE = mind }
			}
		}
	
	}

	auto_accept = yes

	cost = {
		piety = curse_cost
	}
	
	# AI
	# ai_targets = {
	# }
	# ai_frequency = 12

	# ai_potential = {
	# }

	# ai_will_do = {
	# 	base = 0
	# }
}